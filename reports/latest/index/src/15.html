<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\projects\chatle\src\ChatLe.Repository.Identity\ChatleDbContext.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Microsoft.AspNetCore.Identity.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore;
using Microsoft.AspNetCore.Identity;

namespace ChatLe.Models
{
    public class ChatLeIdentityDbContext : ChatLeIdentityDbContext&lt;string, Message, Attendee, Conversation, NotificationConnection&gt;
    {
		public ChatLeIdentityDbContext(DbContextOptions options) : base(options)
		{ }

		protected ChatLeIdentityDbContext()
		{ }
	}
    /// &lt;summary&gt;
    /// Database context for ChatLe user
    /// &lt;/summary&gt;
    public class ChatLeIdentityDbContext&lt;TKey, TMessage, TAttendee, TConversation, TNotificationConnection&gt; : IdentityDbContext&lt;ChatLeUser, IdentityRole, string&gt; 
        where TKey: IEquatable&lt;TKey&gt;
        where TMessage : Message&lt;TKey&gt;
        where TAttendee : Attendee&lt;TKey&gt;
        where TConversation : Conversation&lt;TKey&gt;
        where TNotificationConnection : NotificationConnection&lt;TKey&gt;
    {
        public ChatLeIdentityDbContext(DbContextOptions options):base(options)
        {             
        }

        protected ChatLeIdentityDbContext()
        { }

        /// &lt;summary&gt;
        /// Gets or sets the DbSet of messages
        /// &lt;/summary&gt;
        public DbSet&lt;TMessage&gt; Messages { get; set; }
        /// &lt;summary&gt;
        /// Gets or sets the DbSet of conversations
        /// &lt;/summary&gt;
        public DbSet&lt;TConversation&gt; Conversations { get; set; }
        /// &lt;summary&gt;
        /// Gets or sets the DbSet of attendees
        /// &lt;/summary&gt;
        public DbSet&lt;TAttendee&gt; Attendees { get; set; }
        /// &lt;summary&gt;
        /// Gets or sets the DbSet of notification connections
        /// &lt;/summary&gt;
        public DbSet&lt;TNotificationConnection&gt; NotificationConnections { get; set; }

        protected override void OnModelCreating(ModelBuilder builder)
        {
            base.OnModelCreating(builder);

            builder.Entity&lt;NotificationConnection&lt;TKey&gt;&gt;(b =&gt;
            {
                b.HasKey(n =&gt; new { n.ConnectionId, n.NotificationType });
                b.ToTable(&quot;NotificationConnections&quot;);
            });

            builder.Entity&lt;Message&lt;TKey&gt;&gt;(b =&gt;
            {
                b.HasKey(m =&gt; m.Id);
                b.ToTable(&quot;Messages&quot;);
            });

            builder.Entity&lt;Attendee&lt;TKey&gt;&gt;(b =&gt;
            {
                b.HasKey(a =&gt; new { a.ConversationId, a.UserId });
                b.ToTable(&quot;Attendees&quot;);
            });

            builder.Entity&lt;Conversation&lt;TKey&gt;&gt;(b =&gt;
            {
                b.HasKey(c =&gt; c.Id);
                b.ToTable(&quot;Conversations&quot;);
            });
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[10,62,10,75,1],[11,3,11,4,1],[11,5,11,6,1],[13,3,13,38,0],[14,3,14,4,0],[14,5,14,6,0],[26,66,26,79,1],[27,9,27,10,1],[28,9,28,10,1],[30,9,30,44,0],[31,9,31,10,0],[31,11,31,12,0],[36,43,36,47,1],[36,48,36,52,1],[40,53,40,57,1],[40,58,40,62,1],[44,45,44,49,0],[44,50,44,54,1],[48,73,48,77,1],[48,78,48,82,1],[51,9,51,10,1],[52,13,52,43,1],[54,13,55,13,1],[55,13,55,14,1],[55,14,56,17,1],[56,17,56,75,1],[56,75,57,17,1],[57,17,57,54,1],[57,54,58,13,1],[58,13,58,14,1],[58,14,58,16,1],[54,13,58,16,1],[60,13,61,13,1],[61,13,61,14,1],[61,14,62,17,1],[62,17,62,37,1],[62,37,63,17,1],[63,17,63,39,1],[63,39,64,13,1],[64,13,64,14,1],[64,14,64,16,1],[60,13,64,16,1],[66,13,67,13,1],[67,13,67,14,1],[67,14,68,17,1],[68,17,68,67,1],[68,67,69,17,1],[69,17,69,40,1],[69,40,70,13,1],[70,13,70,14,1],[70,14,70,16,1],[66,13,70,16,1],[72,13,73,13,1],[73,13,73,14,1],[73,14,74,17,1],[74,17,74,37,1],[74,37,75,17,1],[75,17,75,44,1],[75,44,76,13,1],[76,13,76,14,1],[76,14,76,16,1],[72,13,76,16,1],[77,9,77,10,1]]);
    </script>
  </body>
</html>