<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\projects\chatle\src\chatle\Controllers\AccountController.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Threading.Tasks;
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Identity;
using Microsoft.AspNetCore.Mvc;
using ChatLe.Hubs;
using ChatLe.Models;
using ChatLe.ViewModels;
using System.Net;
using ChatLe.Repository.Identity;
using Microsoft.AspNetCore.Http;
using System.Security.Claims;
using System.Linq;
using Microsoft.Extensions.Logging;
using System.Collections.Generic;
using Microsoft.AspNetCore.SignalR;
using Microsoft.AspNetCore.Http.Authentication;
using Microsoft.AspNetCore.Authentication;
using System;

namespace ChatLe.Controllers
{
    [Authorize]
    public class AccountController : Controller
    {
        public AccountController(UserManager&lt;ChatLeUser&gt; userManager, 
            SignInManager signInManager,
            IChatManager&lt;string, ChatLeUser, Conversation, Attendee, Message, NotificationConnection&gt; chatManager,
            IHubContext&lt;ChatHub&gt; hubContext,
            ILoggerFactory loggerFactory)
        {
            UserManager = userManager;
            SignInManager = signInManager;
            ChatManager = chatManager;
            Logger = loggerFactory.CreateLogger&lt;AccountController&gt;();
            HubContext = hubContext;
        }

        public UserManager&lt;ChatLeUser&gt; UserManager { get; private set; }

        public SignInManager&lt;ChatLeUser&gt; SignInManager { get; private set; }

        public IChatManager&lt;string, ChatLeUser, Conversation, Attendee, Message, NotificationConnection&gt; ChatManager { get; private set; }

        public ILogger Logger { get; private set; }

        public IHubContext&lt;ChatHub&gt; HubContext { get; private set; }

        // GET: /Account/Index
        [HttpGet]
        [AllowAnonymous]
        public IActionResult Index(string returnUrl = null, string reason = null)
        {
            ViewBag.ReturnUrl = returnUrl;
            DeleteExternalCookie();
            return View(new LoginPageViewModel());
        }

        //
        // POST: /Account/Login
        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; Login(LoginViewModel model, string returnUrl = null)
        {
            if (ModelState.IsValid)
            {
                var signInStatus = await SignInManager.PasswordSignInAsync(model.UserName, model.Password, model.RememberMe, lockoutOnFailure: false);

                if (signInStatus.Succeeded)
                    return RedirectToLocal(returnUrl);

                ModelState.AddModelError(&quot;&quot;, &quot;Invalid username or password.&quot;);
                return View(model);
            }

            // If we got this far, something failed, redisplay form
            return View(&quot;Index&quot;, new LoginPageViewModel() { Login = model });
        }

        //
        // POST: /Account/SpaLogin
        [HttpPost]
        [AllowAnonymous]
        public async Task&lt;IActionResult&gt; SpaLogin([FromBody] LoginViewModel model)
        {
            if (ModelState.IsValid)
            {
                var signInStatus = await SignInManager.PasswordSignInAsync(model.UserName, model.Password, model.RememberMe, lockoutOnFailure: false);

                if (signInStatus.Succeeded)
                    return new JsonResult(signInStatus.Succeeded);

                ModelState.AddModelError(&quot;InvalidUserOrPAssword&quot;, &quot;Invalid username or password.&quot;);                
            }

            return ReturnSpaError();
        }

        //
        // POST: /Account/Guess
        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; Guess(GuessViewModel model, string returnUrl = null)
        {
            if (ModelState.IsValid)
            {
                var user = new ChatLeUser { UserName = model.UserName };

                var result = await UserManager.CreateAsync(user);
                
                if (result.Succeeded)
                {
                    await SignInManager.SignInAsync(user, isPersistent: false);
                    return RedirectToAction(&quot;Index&quot;, &quot;Home&quot;);
                }
                else
                    AddErrors(result);
            }

            // If we got this far, something failed, redisplay form
            return View(&quot;Index&quot;, new LoginPageViewModel() { Guess = model });
        }

        //
        // POST: /Account/SpaGuess
        [HttpPost]
        [AllowAnonymous]
        public async Task&lt;JsonResult&gt; SpaGuess([FromBody] GuessViewModel model)
        {
            if (ModelState.IsValid)
            {
                var user = new ChatLeUser { UserName = model.UserName };
                var result = await UserManager.CreateAsync(user);
                if (result.Succeeded)
                {
                    await SignInManager.SignInAsync(user, isPersistent: false);
                    return new JsonResult(result.Succeeded);
                }
                else
                {
                    AddErrors(result);
                }
            }

            return ReturnSpaError();
        }

        //
        // GET: /Account/Register
        [AllowAnonymous]
        [HttpGet]
        public IActionResult Register()
        {
            return View();
        }

        //
        // POST: /Account/Register
        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; Register(RegisterViewModel model)
        {
            if (ModelState.IsValid)
            {
                var user = new ChatLeUser { UserName = model.UserName };
                var result = await UserManager.CreateAsync(user, model.Password);

                if (result.Succeeded)
                {
                    await SignInManager.SignInAsync(user, isPersistent: false);
                    return RedirectToAction(&quot;Index&quot;, &quot;Home&quot;);
                }
                else
                    AddErrors(result);
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }

        //
        // POST: /Account/LogOff
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; LogOff(string reason = null)
        {
            await SignOut();
			return RedirectToAction(&quot;Index&quot;, routeValues: new { Reason = reason });
        }

        //
        // POST: /Account/SpaLogOff
        [HttpPost]
        public async Task SpaLogOff(string reason = null)
        {
            await SignOut();        
        }

        //
        // GET: /Account/ExternalLoginCallback
        [HttpGet]
        [AllowAnonymous]
        public IEnumerable&lt;ExternalLoginProvider&gt; GetExternalProviders(){
            return SignInManager.GetExternalAuthenticationSchemesAsync().Result.Select(p =&gt; new ExternalLoginProvider
                { 
                    DisplayName = p.DisplayName,
                    AuthenticationScheme = p.Name  
                });
        }

        //
        // POST: /Account/ExternalLogin
        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public IActionResult ExternalLogin(string provider, string returnUrl = null)
        {
            // Request a redirect to the external login provider.
            var redirectUrl = Url.Action(&quot;ExternalLoginCallback&quot;, &quot;Account&quot;, new { ReturnUrl = returnUrl });
            var properties = SignInManager.ConfigureExternalAuthenticationProperties(provider, redirectUrl, UserManager.GetUserId(User));
            return Challenge(properties, provider);
        }

        //
        // GET: /Account/ExternalLoginCallback
        [HttpGet]
        [AllowAnonymous]
        public async Task&lt;IActionResult&gt; ExternalLoginCallback(string returnUrl = null, string remoteError = null)
        {
            if (returnUrl != null)
            {
                return await SpaExternalLogin(returnUrl, remoteError);
            }

            if (remoteError != null)
            {
                ModelState.AddModelError(string.Empty, $&quot;Error from external provider: {remoteError}&quot;);
                return View(nameof(Login));
            }

            var info = await SignInManager.GetExternalLoginInfoAsync();
            if (info == null)
            {
                return RedirectToAction(nameof(Index));
            }

            // Sign in the user with this external login provider if the user already has a login.
            var result = await SignInManager.ExternalLoginSignInAsync(info.LoginProvider, info.ProviderKey, isPersistent: false);
            if (result.Succeeded)
            {
                // Update any authentication tokens if login succeeded
                await SignInManager.UpdateExternalAuthenticationTokensAsync(info);

                return RedirectToLocal(returnUrl);
            }

            // If the user does not have an account, then ask the user to create an account.
            ViewData[&quot;LoginProvider&quot;] = info.LoginProvider;
            var name = info.Principal.FindFirstValue(ClaimTypes.Name);

            return View(&quot;ExternalLoginConfirmation&quot;, new ExternalLoginConfirmationViewModel { UserName = name });
        }

        private async Task&lt;IActionResult&gt; SpaExternalLogin(string returnUrl, string remoteError)
        {
            if (remoteError != null)
            {
                return new RedirectResult($&quot;{returnUrl}?e={remoteError}&quot;);
            }

            var info = await SignInManager.GetExternalLoginInfoAsync();
            if (info == null)
            {
                return new RedirectResult($&quot;{returnUrl}&quot;);
            }

            var name = info.Principal.FindFirstValue(ClaimTypes.Name);
            // Sign in the user with this external login provider if the user already has a login.
            var result = await SignInManager.ExternalLoginSignInAsync(info.LoginProvider, info.ProviderKey, isPersistent: false);
            if (result.Succeeded)
            {
                // Update any authentication tokens if login succeeded
                await SignInManager.UpdateExternalAuthenticationTokensAsync(info);
                
                var user = await UserManager.FindByLoginAsync(info.LoginProvider, info.ProviderKey);
                
                return new RedirectResult($&quot;{returnUrl}?u={user.UserName}&quot;);
            }

            // If the user does not have an account, then ask the user to create an account.
            return new RedirectResult($&quot;{returnUrl}?p={info.LoginProvider}&amp;u={name}&quot;);
        }

        //
        // POST: /Account/ExternalLoginConfirmation
        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; ExternalLoginConfirmation(ExternalLoginConfirmationViewModel model, string returnUrl = null)
        {
            if (ModelState.IsValid)
            {
                // Get the information about the user from the external login provider
                var info = await SignInManager.GetExternalLoginInfoAsync();
                if (info == null)
                {
                    return View(&quot;ExternalLoginFailure&quot;);
                }
                var user = new ChatLeUser { UserName = model.UserName };
                var result = await UserManager.CreateAsync(user);
                if (result.Succeeded)
                {
                    result = await UserManager.AddLoginAsync(user, info);
                    if (result.Succeeded)
                    {
                        await SignInManager.SignInAsync(user, isPersistent: false);

                        // Update any authentication tokens as well
                        await SignInManager.UpdateExternalAuthenticationTokensAsync(info);

                        return RedirectToLocal(returnUrl);
                    }
                }
                AddErrors(result);
            }

            ViewData[&quot;ReturnUrl&quot;] = returnUrl;
            return View(model);
        }


        //
        // POST: /Account/SpaExternalLoginConfirmation
        [HttpPut]
        [AllowAnonymous]
        public async Task&lt;JsonResult&gt; SpaExternalLoginConfirmation([FromBody] ExternalLoginConfirmationViewModel model)
        {
            if (ModelState.IsValid)
            {
                // Get the information about the user from the external login provider
                var info = await SignInManager.GetExternalLoginInfoAsync();
                if (info == null)
                {
                    ModelState.AddModelError(&quot;NullInfo&quot;, &quot;External login info is null&quot;);
                }
                else
                {
                    var user = new ChatLeUser { UserName = model.UserName };
                    var result = await UserManager.CreateAsync(user);
                    if (result.Succeeded)
                    {
                        result = await UserManager.AddLoginAsync(user, info);
                        if (result.Succeeded)
                        {
                            await SignInManager.SignInAsync(user, isPersistent: false);

                            // Update any authentication tokens as well
                            await SignInManager.UpdateExternalAuthenticationTokensAsync(info);

                            return new JsonResult(&quot;OK&quot;);
                        }
                    }

                    AddErrors(result);
                }
            }

            return ReturnSpaError();
        }

        [HttpGet]
        [AllowAnonymous]
        public async Task&lt;bool&gt; Exists(string userName)
        {
            return await UserManager.FindByNameAsync(userName) != null;
        }

        //GET: /Manage/Manage
        [HttpGet]
        public async Task&lt;IActionResult&gt; Manage(ManageMessageId? message = null)
        {
            ViewData[&quot;StatusMessage&quot;] =
                message == ManageMessageId.RemoveLoginSuccess ? &quot;The external login was removed.&quot;
                : message == ManageMessageId.AddLoginSuccess ? &quot;The external login was added.&quot;
                : message == ManageMessageId.Error ? &quot;An error has occurred.&quot;
                : &quot;&quot;;

            var user = await GetCurrentUserAsync();
            var vm = await GetLogins(user);
            ViewData[&quot;ShowRemoveButton&quot;] = user.PasswordHash != null || vm.CurrentLogins.Count &gt; 1;
            DeleteExternalCookie();
            return View(vm);
        }

        //
        // POST: /Account/UpdatePassword
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; UpdatePassword(UpdatePasswordViewModel model)
        {
            ViewBag.ReturnUrl = Url.Action(&quot;Manage&quot;);
            if (ModelState.IsValid)
            {
                var user = await GetCurrentUserAsync();
                var result = await UserManager.ChangePasswordAsync(user, model.OldPassword, model.NewPassword);
                if (result.Succeeded)
                    return RedirectToAction(&quot;Manage&quot;, new { Message = ManageMessageId.ChangePasswordSuccess });
                else
                    AddErrors(result);
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }

        //
        // PUT: /Account/ChangePassword
        [HttpPut]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; ChangePassword([FromBody] UpdatePasswordViewModel model)
        {
            ViewBag.ReturnUrl = Url.Action(&quot;Manage&quot;);
            if (ModelState.IsValid)
            {
                var user = await GetCurrentUserAsync();
                var result = await UserManager.ChangePasswordAsync(user, model.OldPassword, model.NewPassword);
                if (result.Succeeded)
                    return new JsonResult(ManageMessageId.ChangePasswordSuccess);
                else
                    AddErrors(result);
            }

            return ReturnSpaError();
        }

        //
        // POST: /Account/SetPassword
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; SetPassword([FromBody] CreatePasswordViewModel model)
        {
            ViewBag.ReturnUrl = Url.Action(&quot;Manage&quot;);
            if (ModelState.IsValid)
            {
                var user = await GetCurrentUserAsync();
                var result = await UserManager.AddPasswordAsync(user, model.NewPassword);
                if (result.Succeeded)
                {
                    await SignInManager.SignInAsync(user, false);
                    return new JsonResult(ManageMessageId.ChangePasswordSuccess);
                }
                else
                    AddErrors(result);
            }

            return ReturnSpaError();
        }

        [HttpGet]
        public async Task&lt;ManageLoginsViewModel&gt; Logins()
        {
            var user = await GetCurrentUserAsync();
            return await GetLogins(user);
        }

        //
        // POST: /Manage/RemoveLogin
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task&lt;IActionResult&gt; RemoveLogin(RemoveLoginViewModel account)
        {
            if (await InternalRemoveLogin(account))
            {
                return RedirectToAction(nameof(Manage), new { ManageMessageId.RemoveLoginSuccess });
            }
            return RedirectToAction(nameof(Manage));
        }

        [HttpDelete]
        public async Task SpaRemoveLogin(RemoveLoginViewModel account)
        {
            await InternalRemoveLogin(account);
        }

        //
        // POST: /Manage/LinkLogin
        [HttpPost]
        [ValidateAntiForgeryToken]
        public IActionResult LinkLogin(string provider, string returnUrl = null)
        {
            // Request a redirect to the external login provider to link a login for the current user
            var redirectUrl = Url.Action(&quot;LinkLoginCallback&quot;, &quot;Account&quot;, new { ReturnUrl = returnUrl });
            var properties = SignInManager.ConfigureExternalAuthenticationProperties(provider, redirectUrl, UserManager.GetUserId(User));            
            return Challenge(properties, provider);
        }

        //
        // GET: /Manage/LinkLoginCallback
        [HttpGet]
        public async Task&lt;ActionResult&gt; LinkLoginCallback(string returnUrl = null)
        {
            var user = await GetCurrentUserAsync();

            if (returnUrl != null)
            {
                return await SpaLinkLogin(user, returnUrl);
            }

            if (user == null)
            {
                return View(&quot;Error&quot;);
            }
            var info = await SignInManager.GetExternalLoginInfoAsync(await UserManager.GetUserIdAsync(user));
            if (info == null)
            {
                return RedirectToAction(nameof(Manage), new { Message = ManageMessageId.Error });
            }
            var result = await UserManager.AddLoginAsync(user, info);
            var message = result.Succeeded ? ManageMessageId.AddLoginSuccess : ManageMessageId.Error;
            return RedirectToAction(nameof(Manage), new { Message = message });
        }

        #region Helpers

        private async Task&lt;ActionResult&gt; SpaLinkLogin(ChatLeUser user, string returnUrl)
        {
            if (user == null)
            {
                return new RedirectResult($&quot;{returnUrl}&amp;r=no-user&quot;);
            }

            var info = await SignInManager.GetExternalLoginInfoAsync(await UserManager.GetUserIdAsync(user));
            if (info == null)
            {
                return new RedirectResult($&quot;{returnUrl}&amp;r=no-info&quot;);
            }

            var result = await UserManager.AddLoginAsync(user, info);
            var message = result.Succeeded ? &quot;succeed&quot; : &quot;error&quot;;
            return new RedirectResult($&quot;{returnUrl}&amp;r={message}&quot;);
        }

        private void DeleteExternalCookie()
        {
            Response.Cookies.Delete(&quot;Identity.External&quot;);
        }

        private async Task&lt;ManageLoginsViewModel&gt; GetLogins(ChatLeUser user)
        {
            var userLogins = await UserManager.GetLoginsAsync(user);
            var otherLogins = (await SignInManager.GetExternalAuthenticationSchemesAsync())
                .Where(auth =&gt; userLogins.All(ul =&gt; auth.Name != ul.LoginProvider))
                .Select(auth =&gt; new AuthenticationDescription { AuthenticationScheme = auth.Name, DisplayName = auth.DisplayName })
                .ToList();

            return new ManageLoginsViewModel
            {
                CurrentLogins = userLogins,
                OtherLogins = otherLogins,
                Passwords = user.PasswordHash != null ? new UpdatePasswordViewModel() : null                
            };
        }

        private async Task&lt;bool&gt; InternalRemoveLogin(RemoveLoginViewModel account)
        {
            var user = await GetCurrentUserAsync();
            if (user != null)
            {
                var result = await UserManager.RemoveLoginAsync(user, account.LoginProvider, account.ProviderKey);
                if (result.Succeeded)
                {
                    await SignInManager.SignInAsync(user, isPersistent: false);
                    return true;
                }
            }

            return false;
        }

        private JsonResult ReturnSpaError()
        {
            Response.StatusCode = (int)HttpStatusCode.BadRequest;
            return new JsonResult(ModelState.Root.Children);            
        }

        private async Task SignOut()
        {
            var user = await GetCurrentUserAsync();
			if (user != null)
			{
                try
                {
                    user.IsGuess = await ChatManager.IsGuess(user);
                    await HubContext.Clients.All.SendAsync(&quot;userDisconnected&quot;, new { id = user.UserName, isRemoved = user.IsGuess });
                    if (user.IsGuess)
                    {
                        await ChatManager.RemoveUserAsync(user);
                    }
                }
                catch(Exception e)
                {
                    Logger.LogError(e, &quot;AccountController Signout error . {0}&quot;, e.Message);
                }
            }
            await SignInManager.SignOutAsync();
        }

        private void AddErrors(IdentityResult result)
        {
            foreach (var error in result.Errors)
                ModelState.AddModelError(error.Code, error.Description);
        }

        private async Task&lt;ChatLeUser&gt; GetCurrentUserAsync()
        {
            return await ChatManager.Store.FindUserByNameAsync(HttpContext.User.Identity.Name);
        }

        private IActionResult RedirectToLocal(string returnUrl)
        {
            if (Url.IsLocalUrl(returnUrl))
                return Redirect(returnUrl);
            else
                return RedirectToAction(&quot;Index&quot;, &quot;Home&quot;);
        }

        public enum ManageMessageId
        {
            ChangePasswordSuccess,
            Error,
            AddLoginSuccess,
            RemoveLoginSuccess
        }
        #endregion
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[25,9,29,42,1],[30,9,30,10,1],[31,13,31,39,1],[32,13,32,43,1],[33,13,33,39,1],[34,13,34,70,1],[35,13,35,37,1],[36,9,36,10,1],[38,54,38,58,1],[38,59,38,71,1],[40,58,40,62,1],[40,63,40,75,1],[42,120,42,124,1],[42,125,42,137,1],[44,33,44,37,0],[44,38,44,50,1],[46,50,46,54,1],[46,55,46,67,1],[52,9,52,10,1],[53,13,53,43,1],[54,13,54,36,1],[55,13,55,51,1],[56,9,56,10,1],[64,9,64,10,1],[65,13,65,36,1],[66,13,66,14,1],[67,17,67,151,1],[69,17,69,44,1],[70,21,70,55,1],[72,17,72,79,1],[73,17,73,36,1],[77,13,77,78,0],[78,9,78,10,1],[85,9,85,10,0],[86,13,86,36,0],[87,13,87,14,0],[88,17,88,151,0],[90,17,90,44,0],[91,21,91,67,0],[93,17,93,100,0],[94,13,94,14,0],[96,13,96,37,0],[97,9,97,10,0],[105,9,105,10,1],[106,13,106,36,1],[107,13,107,14,1],[108,17,108,73,1],[110,17,110,66,1],[112,17,112,38,1],[113,17,113,18,1],[114,21,114,80,1],[115,21,115,62,1],[118,21,118,39,1],[119,13,119,14,1],[122,13,122,78,1],[123,9,123,10,1],[130,9,130,10,0],[131,13,131,36,0],[132,13,132,14,0],[133,17,133,73,0],[134,17,134,66,0],[135,17,135,38,0],[136,17,136,18,0],[137,21,137,80,0],[138,21,138,61,0],[141,17,141,18,0],[142,21,142,39,0],[143,17,143,18,0],[144,13,144,14,0],[146,13,146,37,0],[147,9,147,10,0],[154,9,154,10,1],[155,13,155,27,1],[156,9,156,10,1],[164,9,164,10,1],[165,13,165,36,1],[166,13,166,14,1],[167,17,167,73,1],[168,17,168,82,1],[170,17,170,38,1],[171,17,171,18,1],[172,21,172,80,1],[173,21,173,62,1],[176,21,176,39,1],[177,13,177,14,1],[180,13,180,32,1],[181,9,181,10,1],[188,9,188,10,1],[189,13,189,29,1],[190,4,190,75,1],[191,9,191,10,1],[197,9,197,10,0],[198,13,198,29,0],[199,9,199,10,0],[205,73,205,74,0],[206,13,206,93,0],[206,93,210,18,0],[210,18,210,20,0],[206,13,210,20,0],[211,9,211,10,0],[219,9,219,10,0],[221,13,221,109,0],[222,13,222,138,0],[223,13,223,52,0],[224,9,224,10,0],[231,9,231,10,0],[232,13,232,35,0],[233,13,233,14,0],[234,17,234,71,0],[237,13,237,37,0],[238,13,238,14,0],[239,17,239,104,0],[240,17,240,44,0],[243,13,243,72,0],[244,13,244,30,0],[245,13,245,14,0],[246,17,246,56,0],[250,13,250,130,0],[251,13,251,34,0],[252,13,252,14,0],[254,17,254,83,0],[256,17,256,51,0],[260,13,260,60,0],[261,13,261,71,0],[263,13,263,114,0],[264,9,264,10,0],[267,9,267,10,0],[268,13,268,37,0],[269,13,269,14,0],[270,17,270,75,0],[273,13,273,72,0],[274,13,274,30,0],[275,13,275,14,0],[276,17,276,59,0],[279,13,279,71,0],[281,13,281,130,0],[282,13,282,34,0],[283,13,283,14,0],[285,17,285,83,0],[287,17,287,101,0],[289,17,289,77,0],[293,13,293,87,0],[294,9,294,10,0],[302,9,302,10,0],[303,13,303,36,0],[304,13,304,14,0],[306,17,306,76,0],[307,17,307,34,0],[308,17,308,18,0],[309,21,309,57,0],[311,17,311,73,0],[312,17,312,66,0],[313,17,313,38,0],[314,17,314,18,0],[315,21,315,74,0],[316,21,316,42,0],[317,21,317,22,0],[318,25,318,84,0],[321,25,321,91,0],[323,25,323,59,0],[325,17,325,18,0],[326,17,326,35,0],[327,13,327,14,0],[329,13,329,47,0],[330,13,330,32,0],[331,9,331,10,0],[339,9,339,10,0],[340,13,340,36,0],[341,13,341,14,0],[343,17,343,76,0],[344,17,344,34,0],[345,17,345,18,0],[346,21,346,89,0],[347,17,347,18,0],[349,17,349,18,0],[350,21,350,77,0],[351,21,351,70,0],[352,21,352,42,0],[353,21,353,22,0],[354,25,354,78,0],[355,25,355,46,0],[356,25,356,26,0],[357,29,357,88,0],[360,29,360,95,0],[362,29,362,57,0],[364,21,364,22,0],[366,21,366,39,0],[367,17,367,18,0],[368,13,368,14,0],[370,13,370,37,0],[371,9,371,10,0],[376,9,376,10,0],[377,13,377,72,0],[378,9,378,10,0],[383,9,383,10,1],[384,13,388,22,1],[390,13,390,52,1],[391,13,391,44,1],[392,13,392,100,1],[393,13,393,36,1],[394,13,394,29,1],[395,9,395,10,1],[402,9,402,10,1],[403,13,403,54,1],[404,13,404,36,1],[405,13,405,14,1],[406,17,406,56,1],[407,17,407,112,1],[408,17,408,38,1],[409,21,409,112,1],[411,21,411,39,1],[412,13,412,14,1],[415,13,415,32,1],[416,9,416,10,1],[423,9,423,10,0],[424,13,424,54,0],[425,13,425,36,0],[426,13,426,14,0],[427,17,427,56,0],[428,17,428,112,0],[429,17,429,38,0],[430,21,430,82,0],[432,21,432,39,0],[433,13,433,14,0],[435,13,435,37,0],[436,9,436,10,0],[443,9,443,10,0],[444,13,444,54,0],[445,13,445,36,0],[446,13,446,14,0],[447,17,447,56,0],[448,17,448,90,0],[449,17,449,38,0],[450,17,450,18,0],[451,21,451,66,0],[452,21,452,82,0],[455,21,455,39,0],[456,13,456,14,0],[458,13,458,37,0],[459,9,459,10,0],[463,9,463,10,0],[464,13,464,52,0],[465,13,465,42,0],[466,9,466,10,0],[473,9,473,10,0],[474,13,474,52,0],[475,13,475,14,0],[476,17,476,101,0],[478,13,478,53,0],[479,9,479,10,0],[483,9,483,10,0],[484,13,484,48,0],[485,9,485,10,0],[492,9,492,10,0],[494,13,494,105,0],[495,13,495,138,0],[496,13,496,52,0],[497,9,497,10,0],[503,9,503,10,0],[504,13,504,52,0],[506,13,506,35,0],[507,13,507,14,0],[508,17,508,60,0],[511,13,511,30,0],[512,13,512,14,0],[513,17,513,38,0],[515,13,515,110,0],[516,13,516,30,0],[517,13,517,14,0],[518,17,518,98,0],[520,13,520,70,0],[521,13,521,102,0],[522,13,522,80,0],[523,9,523,10,0],[528,9,528,10,0],[529,13,529,30,0],[530,13,530,14,0],[531,17,531,69,0],[534,13,534,110,0],[535,13,535,30,0],[536,13,536,14,0],[537,17,537,69,0],[540,13,540,70,0],[541,13,541,66,0],[542,13,542,67,0],[543,9,543,10,0],[546,9,546,10,1],[547,13,547,58,1],[548,9,548,10,1],[551,9,551,10,1],[552,13,552,69,1],[553,13,554,32,1],[554,32,554,53,0],[554,53,554,82,0],[554,82,554,83,0],[554,32,554,83,0],[554,83,555,33,1],[555,33,555,131,0],[555,131,556,27,1],[553,13,556,27,1],[558,13,563,15,1],[564,9,564,10,1],[567,9,567,10,0],[568,13,568,52,0],[569,13,569,30,0],[570,13,570,14,0],[571,17,571,115,0],[572,17,572,38,0],[573,17,573,18,0],[574,21,574,80,0],[575,21,575,33,0],[577,13,577,14,0],[579,13,579,26,0],[580,9,580,10,0],[583,9,583,10,0],[584,13,584,66,0],[585,13,585,61,0],[586,9,586,10,0],[589,9,589,10,1],[590,13,590,52,1],[591,4,591,21,1],[592,4,592,5,1],[594,17,594,18,1],[595,21,595,68,1],[596,21,596,134,1],[597,21,597,38,1],[598,21,598,22,0],[599,25,599,65,0],[600,21,600,22,0],[601,17,601,18,1],[602,17,602,35,0],[603,17,603,18,0],[604,21,604,92,0],[605,17,605,18,0],[606,13,606,14,1],[607,13,607,48,1],[608,9,608,10,1],[611,9,611,10,1],[612,13,612,20,1],[612,22,612,31,1],[612,32,612,34,1],[612,35,612,48,1],[613,17,613,73,1],[614,9,614,10,1],[617,9,617,10,1],[618,13,618,96,1],[619,9,619,10,1],[622,9,622,10,1],[623,13,623,43,1],[624,17,624,44,0],[626,17,626,58,1],[627,9,627,10,1]]);
    </script>
  </body>
</html>